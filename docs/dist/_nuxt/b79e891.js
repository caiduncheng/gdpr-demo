(window.webpackJsonp=window.webpackJsonp||[]).push([[47,27],{537:function(t,e,r){var content=r(585);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("d2245f6c",content,!0,{sourceMap:!1})},584:function(t,e,r){"use strict";r(537)},585:function(t,e,r){var n=r(18)((function(i){return i[1]}));n.push([t.i,'.reset-password[data-v-6e764944] .el-result{text-align:left}.reset-password .indicator[data-v-6e764944]{align-items:center;display:flex;height:5px;justify-content:space-between;margin:10px 0;width:180px}.reset-password .indicator span[data-v-6e764944]{background:#d3d3d3;height:100%;position:relative;width:100%}.reset-password .indicator span[data-v-6e764944]:before{content:"";height:100%;left:0;position:absolute;top:0;transition:width .5s;width:0}.reset-password .indicator span.weak[data-v-6e764944]:before{background-color:#ff4757}.reset-password .indicator span.moderate[data-v-6e764944]:before{background-color:orange}.reset-password .indicator span.strong[data-v-6e764944]:before{background-color:#9acb6b}.reset-password .indicator span.active[data-v-6e764944]:before{width:100%}.reset-password .indicator span[data-v-6e764944]:nth-child(2){margin:0 3px}',""]),n.locals={},t.exports=n},638:function(t,e,r){"use strict";r.r(e);var n=r(2),o=(r(27),r(12),r(39),r(40),r(54),r(20)),c=null,l={1:"Weak",2:"Moderate",3:"Strong"},d="",w="",f="",m=null,h=!0,v={layout:"login",validate:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.params,t.query,r=t.store,d=Object(o.b)("account"),w=Object(o.b)("email"),f=Object(o.b)("token"),e.prev=4,e.next=7,r.dispatch("verifyResetToken",{username:d,email:w,token:f});case 7:m=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),h=!1;case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,null,[[4,10]])})))()},data:function(){return{VUE_APP_PUBKEY:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAkkApKkKERcT8C9pkcH7F2YxOyK8veLXqLm06iY+XlTuvSFCxC3Fe7AudJ01nj8BAXiI947/OTEHsbX8hQUIitJl1A/AFYiiqzd+ZzsQNPDrtXUMIGMFDa2KpYzSOCwLimZ4NHShXpynEjyer5jz55iL8LjwqBiPcHeg7IfA1Itfm4moONjaCBzMCtNw+5En6i4cS0f2Tilxh+8LLnryqThJiom64Yvu9NtLJLAYr5eGxQ6ng679AaD0nckXGOiy4HqgNA3LTGfq45L4wrCbLR2UcqPba9HJ90zamXz7elrgwFy1ShLCyLQ9+SjxGKKQpdxeqLvpttX+UY/+O4S8j2wIDAQAB",verified:h,loading:!1,loaded:!1,success:!1,mapPasswordStrength:l,showPasswordStrength:!1,passwordStrength:0,email:"",account:"",token:"",form:{password:"",confirmPassword:""},loginRules:{password:[{validator:function(t,e,r){if(e)if(this.showPasswordStrength=!0,this.passwordStrength=1,e.length<8)r(new Error(this.$t("login.validate_password_tip")));else{e.length>18&&r(new Error(this.$t("login.validate_password_tip"))),this.showPasswordStrength=!0;var n=/[A-Z]/.test(e)+/[a-z]/.test(e)+/\d/.test(e)+/\W/.test(e);n<=2?(this.passwordStrength=1,r(new Error(this.$t("login.validate_password_strength")))):3===n?this.passwordStrength=2:4===n&&(this.passwordStrength=3)}else this.showPasswordStrength=!1,r(new Error(this.$t("login.validate_password_required")));r()}.bind(this)}],confirmPassword:[{validator:function(t,e,r){e||r(new Error(this.$t("login.validate_confirm_password_required"))),e!==this.form.password?r(new Error(this.$t("login.consistent_password_tip"))):r()}.bind(this)}]}}},computed:{getAccount:function(){if(console.log(m),m&&m.account)return m.account}},methods:{encryptPassword:function(t){var e=new c,r=this.VUE_APP_PUBKEY;return e.setPublicKey(r),e.encrypt(t)},confirm:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$refs.form.validate(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){var n,o,c,i,l,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=11;break}return t.loading=!0,e.next=4,t.$store.dispatch("getTimeStamp");case 4:for(n=e.sent,o=n.timestamp,c="",i=0;i<6;i++)c+=Math.floor(10*Math.random());l=JSON.stringify({random:c,timestamp:o,password:t.form.password}),m=t.encryptPassword(l),t.$store.dispatch("resetPassword",{newPassword:m,username:d,email:w,token:f}).then((function(){t.success=!0,t.loading=!1})).catch((function(e){console.log(e),t.$message({type:"error",message:e.message})})).finally((function(){t.loading=!1}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(0).then(r.bind(null,712));case 2:n=e.sent,o=n.default,c=o,t.$store.commit("SET_MENU",!1);case 6:case"end":return e.stop()}}),e)})))()}},_=v,x=(r(584),r(10)),component=Object(x.a)(_,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"container container-fluid reset-password pt-24"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-10 m-auto"},[e("el-card",[t.verified?e("div",[t.success?e("div",{staticClass:"text-center"},[e("el-result",{attrs:{icon:"success"}},[e("h2",{staticClass:"text-3xl",attrs:{slot:"title"},slot:"title"},[t._v("\n                "+t._s(t.$t("login.password_set_successfully"))+"\n              ")])]),t._v(" "),e("NuxtLink",{attrs:{to:{name:"lang",params:{lang:t.$store.state.locale}}}},[e("el-button",{attrs:{type:"primary"}},[t._v(t._s(t.$t("login.go_to_home_page")))])],1)],1):e("div",[e("h2",{staticClass:"text-2xl text-center"},[t._v("\n              "+t._s(t.$t("login.title_reset_password"))+"\n            ")]),t._v(" "),e("h3",{staticClass:"text-secondary text-sm text-center mt-3"},[t._v("\n              "+t._s(t.$t("login.account"))+":"+t._s(t.getAccount)+"\n            ")]),t._v(" "),e("el-form",{ref:"form",staticClass:"p-5",attrs:{model:t.form,rules:t.loginRules}},[e("el-form-item",{attrs:{label:t.$t("login.new_password"),prop:"password"}},[e("el-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showPasswordStrength,expression:"showPasswordStrength"}],staticClass:"password-strength"},[e("div",{staticClass:"text"},[t._v("\n                    "+t._s(t.$t("login.password_strength"))+"\n                    "+t._s(t.mapPasswordStrength[t.passwordStrength])+"\n                  ")]),t._v(" "),e("div",{staticClass:"indicator"},[e("span",{class:["weak",{active:t.passwordStrength>=1}]}),t._v(" "),e("span",{class:["moderate",{active:t.passwordStrength>=2}]}),t._v(" "),e("span",{class:["strong",{active:3===t.passwordStrength}]})])])],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("login.confirm_password"),prop:"confirmPassword"}},[e("el-input",{attrs:{type:"password"},model:{value:t.form.confirmPassword,callback:function(e){t.$set(t.form,"confirmPassword",e)},expression:"form.confirmPassword"}})],1),t._v(" "),e("el-form-item",[e("el-button",{staticClass:"w-full",attrs:{type:"primary",loading:t.loading},on:{click:t.confirm}},[t._v(t._s(t.$t("common.confirm")))])],1)],1)],1)]):e("div",[e("el-result",{attrs:{icon:"error"}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("h2",{staticClass:"text-3xl mb-2 text-center",attrs:{slot:"title"},slot:"title"},[t._v("\n              "+t._s(t.$t("login.invalid_link"))+"\n            ")]),t._v(" "),e("span",[t._v("\n              "+t._s(t.$t("login.invalid_link_info"))+"\n            ")])])])],1)])],1)])])}),[],!1,null,"6e764944",null);e.default=component.exports},725:function(t,e,r){"use strict";r.r(e);var n=r(638).default,o=r(10),component=Object(o.a)(n,undefined,undefined,!1,null,null,null);e.default=component.exports}}]);