(window.webpackJsonp=window.webpackJsonp||[]).push([[33,18],{538:function(t,e,r){"use strict";var o=r(3),n=r(323).trim;o({target:"String",proto:!0,forced:r(539)("trim")},{trim:function(){return n(this)}})},539:function(t,e,r){"use strict";var o=r(112).PROPER,n=r(4),d=r(324);t.exports=function(t){return n((function(){return!!d[t]()||"​᠎"!=="​᠎"[t]()||o&&d[t].name!==t}))}},547:function(t,e,r){var content=r(571);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("24630869",content,!0,{sourceMap:!1})},570:function(t,e,r){"use strict";r(547)},571:function(t,e,r){var o=r(18)((function(i){return i[1]}));o.push([t.i,'.reset-password .indicator[data-v-26a399ce]{align-items:center;display:flex;height:5px;justify-content:space-between;margin:10px 0;width:180px}.reset-password .indicator span[data-v-26a399ce]{background:#d3d3d3;height:100%;position:relative;width:100%}.reset-password .indicator span[data-v-26a399ce]:before{content:"";height:100%;left:0;position:absolute;top:0;transition:width .5s;width:0}.reset-password .indicator span.weak[data-v-26a399ce]:before{background-color:#ff4757}.reset-password .indicator span.moderate[data-v-26a399ce]:before{background-color:orange}.reset-password .indicator span.strong[data-v-26a399ce]:before{background-color:#9acb6b}.reset-password .indicator span.active[data-v-26a399ce]:before{width:100%}.reset-password .indicator span[data-v-26a399ce]:nth-child(2){margin:0 3px}',""]),o.locals={},t.exports=o},626:function(t,e,r){"use strict";r.r(e);r(538);var o=r(2),n=(r(55),r(13),r(29),r(38),r(39),r(22),null),d={1:"Weak",2:"Moderate",3:"Strong"},c={layout:"login",data:function(){var t=this;return{captchaImgSrc:"",VUE_APP_CAPTCHA:"1",VUE_APP_PUBKEY:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAkkApKkKERcT8C9pkcH7F2YxOyK8veLXqLm06iY+XlTuvSFCxC3Fe7AudJ01nj8BAXiI947/OTEHsbX8hQUIitJl1A/AFYiiqzd+ZzsQNPDrtXUMIGMFDa2KpYzSOCwLimZ4NHShXpynEjyer5jz55iL8LjwqBiPcHeg7IfA1Itfm4moONjaCBzMCtNw+5En6i4cS0f2Tilxh+8LLnryqThJiom64Yvu9NtLJLAYr5eGxQ6ng679AaD0nckXGOiy4HqgNA3LTGfq45L4wrCbLR2UcqPba9HJ90zamXz7elrgwFy1ShLCyLQ9+SjxGKKQpdxeqLvpttX+UY/+O4S8j2wIDAQAB",verified:!1,loading:!1,loaded:!1,success:!1,mapPasswordStrength:d,showPasswordStrength:!1,passwordStrength:0,username:"",email:"",token:"",form:{oldPassword:"",password:"",confirmPassword:"",code:""},loginRules:{oldPassword:[{validator:function(t,e,r){e?(e.length<6||e.length>18)&&r(new Error(this.$t("login.validate_password6_tip"))):r(new Error(this.$t("login.validate_password_required"))),r()}.bind(this)}],password:[{validator:function(t,e,r){if(e)if(this.showPasswordStrength=!0,this.passwordStrength=1,e.length<8)r(new Error(this.$t("login.validate_password_tip")));else{e.length>18&&r(new Error(this.$t("login.validate_password_tip"))),e==this.form.oldPassword&&r(new Error(this.$t("login.validate_password_same"))),this.showPasswordStrength=!0;var o=/[A-Z]/.test(e)+/[a-z]/.test(e)+/\d/.test(e)+/\W/.test(e);o<=2?(this.passwordStrength=1,r(new Error(this.$t("login.validate_password_strength")))):3===o?this.passwordStrength=2:4===o&&(this.passwordStrength=3)}else this.showPasswordStrength=!1,r(new Error(this.$t("login.validate_password_required")));r()}.bind(this)}],confirmPassword:[{validator:function(t,e,r){e||r(new Error(this.$t("login.validate_confirm_password_required"))),e!==this.form.password?r(new Error(this.$t("login.consistent_password_tip"))):r()}.bind(this)}],code:[{required:!0,trigger:"manual",validator:function(e,r,o){r?r.length<5?o(new Error(t.$t("login.validate_code_less5_tip"))):o():o(new Error(t.$t("login.validate_code_required")))}}]}}},methods:{getCaptcha:function(){if("1"==this.VUE_APP_CAPTCHA){this.captchaImgSrc="/online/authorization/auth/verify/code/password/change?time="+(new Date).getTime()+"&WEB-TOKEN="+this.$store.getters.token}},encryptPassword:function(t){var e=new n,r=this.VUE_APP_PUBKEY;return e.setPublicKey(r),e.encrypt(t)},validate:function(t,e,r){this.showFlag||(this.showFlag=!e,this[t+"Popover"]=!e,e||(this.invalidMessage=r))},confirm:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$refs.form.validate(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(r){var o,n,d,i,c,l,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=15;break}return t.loading=!0,e.next=4,t.$store.dispatch("getTimeStamp");case 4:for(o=e.sent,n=o.timestamp,d="",i=0;i<6;i++)d+=Math.floor(10*Math.random());for(c=JSON.stringify({random:d,timestamp:n,password:t.form.password}),l=t.encryptPassword(c),d="",i=0;i<6;i++)d+=Math.floor(10*Math.random());c=JSON.stringify({random:d,timestamp:n,password:t.form.oldPassword}),w=t.encryptPassword(c),t.$store.dispatch("changePassword",{oldPassword:w,newPassword:l,code:t.form.code}).then((function(e){t.success=!0,t.$store.commit("REMOVE_TOKEN")})).catch((function(e){console.log(e),t.$message({type:"error",message:e.message}),t.getCaptcha()})).finally((function(){t.loading=!1}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var o,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(0).then(r.bind(null,726));case 2:o=e.sent,d=o.default,n=d,t.getCaptcha();case 6:case"end":return e.stop()}}),e)})))()}},l=c,w=(r(570),r(9)),component=Object(w.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"container container-fluid reset-password pt-24"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6 offset-3"},[e("el-card",[t.success?e("div",{staticClass:"text-center"},[e("el-result",{attrs:{icon:"success"}},[e("h2",{staticClass:"text-3xl",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("login.password_set_successfully")))])]),t._v(" "),e("NuxtLink",{attrs:{to:{name:"lang",params:{lang:t.$store.state.locale}}}},[e("el-button",{attrs:{type:"primary"}},[t._v(t._s(t.$t("login.go_to_home_page")))])],1)],1):e("div",[e("h2",{staticClass:"text-2xl text-center"},[t._v(t._s(t.$t("login.title_reset_password")))]),t._v(" "),e("el-form",{ref:"form",attrs:{model:t.form,rules:t.loginRules},on:{validate:t.validate}},[e("el-form-item",{attrs:{label:t.$t("login.old_password"),prop:"oldPassword"}},[e("el-input",{attrs:{type:"password"},model:{value:t.form.oldPassword,callback:function(e){t.$set(t.form,"oldPassword",e)},expression:"form.oldPassword"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("login.new_password"),prop:"password"}},[e("el-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showPasswordStrength,expression:"showPasswordStrength"}],staticClass:"password-strength"},[e("div",{staticClass:"text"},[t._v(t._s(t.$t("login.password_strength"))+" "+t._s(t.mapPasswordStrength[t.passwordStrength]))]),t._v(" "),e("div",{staticClass:"indicator"},[e("span",{class:["weak",{active:t.passwordStrength>=1}]}),t._v(" "),e("span",{class:["moderate",{active:t.passwordStrength>=2}]}),t._v(" "),e("span",{class:["strong",{active:3===t.passwordStrength}]})])])],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("login.confirm_password"),prop:"confirmPassword"}},[e("el-input",{attrs:{type:"password"},model:{value:t.form.confirmPassword,callback:function(e){t.$set(t.form,"confirmPassword",e)},expression:"form.confirmPassword"}})],1),t._v(" "),"1"===t.VUE_APP_CAPTCHA?e("div",{staticClass:"flex"},[e("el-form-item",{staticClass:"flex-auto",attrs:{label:t.$t("login.captcha"),prop:"code"}},[e("el-input",{attrs:{placeholder:t.$t("login.captcha"),maxlength:"5"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code","string"==typeof e?e.trim():e)},expression:"form.code"}})],1),t._v(" "),e("button",{staticClass:"ml-4",on:{click:function(e){return e.preventDefault(),t.getCaptcha.apply(null,arguments)}}},[e("img",{staticStyle:{height:"40px",width:"120px"},attrs:{src:t.captchaImgSrc,alt:""}})])],1):t._e(),t._v(" "),e("el-form-item",[e("el-button",{staticClass:"w-full",attrs:{type:"primary",loading:t.loading},on:{click:t.confirm}},[t._v(t._s(t.$t("common.confirm")))])],1)],1)],1)])],1)])])}),[],!1,null,"26a399ce",null);e.default=component.exports},735:function(t,e,r){"use strict";r.r(e);var o=r(626).default,n=r(9),component=Object(n.a)(o,undefined,undefined,!1,null,null,null);e.default=component.exports}}]);